<!DOCTYPE html>
<html lang="it">

<head>
                    <meta http-equiv="Content-Security-Policy" content="default-src 'self' file:; script-src 'self' 'unsafe-inline' 'unsafe-eval' file: https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' file: https://fonts.googleapis.com https://cdn.jsdelivr.net; font-src 'self' file: https://fonts.gstatic.com data:; img-src 'self' file: data: blob: https:; connect-src 'self' file: https:; media-src 'self' file: data: blob:; object-src 'none'; base-uri 'self'; frame-src 'self'">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AyPi - Lista acquisti</title>
    <link rel="stylesheet" href="../../styles/utilities/ferie-permessi-style.css">
    <link rel="stylesheet" href="../../styles/utilities/product-manager-style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
</head>

<body data-pm-list-mode="purchase">
    <script>
        (function () {
            document.body.classList.add("pm-ready");
        })();
    </script>
    <div class="pm-page">
        <header class="pm-header">
            <div class="pm-header__title">
                <h1>Lista acquisti</h1>
                <div class="pm-header__subtitle">Elenco prodotti da acquistare</div>
                <button type="button" class="fp-header__subtitle-link" id="pm-guide-news">
                    Visualizza novita e aggiornamenti
                </button>
            </div>
            <div class="pm-header__actions">
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-debug-clean" title="Pulizia debug">
                    <span class="material-icons">warning</span>
                </button>
                <button type="button" class="pm-btn" id="pm-export-open">Export Excel</button>
                <button type="button" class="pm-btn" id="pm-refresh">Aggiorna</button>
                <button type="button" class="pm-btn" id="pm-login-toggle">Login</button>
            </div>
        </header>

        <main class="pm-body">
            <section class="pm-list">
                <div class="pm-cart-toolbar">
                    <div class="pm-field">
                        <label for="pm-cart-search">Ricerca</label>
                        <input type="text" id="pm-cart-search" placeholder="Cerca per prodotto, tag, dipendente...">
                    </div>
                    <div class="pm-field">
                        <label for="pm-cart-filter-urgency">Priorità</label>
                        <select id="pm-cart-filter-urgency">
                            <option value="">Tutte</option>
                            <option value="Alta">Alta</option>
                            <option value="Media">Media</option>
                            <option value="Bassa">Bassa</option>
                        </select>
                    </div>
                    <div class="pm-field">
                        <label for="pm-cart-filter-tag">Tipologia</label>
                        <select id="pm-cart-filter-tag"></select>
                    </div>
                    <div class="pm-field">
                        <label for="pm-cart-sort">Ordina per</label>
                        <select id="pm-cart-sort">
                            <option value="created_desc">Data (nuove)</option>
                            <option value="created_asc">Data (vecchie)</option>
                            <option value="product_asc">Prodotto (A-Z)</option>
                            <option value="product_desc">Prodotto (Z-A)</option>
                            <option value="urgency_desc">Priorità</option>
                            <option value="requester_asc">Richiesto da (A-Z)</option>
                        </select>
                    </div>
                </div>
                <div id="pm-requests-list" class="pm-requests-list"></div>
            </section>
        </main>
    </div>

    <div class="pm-modal is-hidden" id="pm-login-modal" aria-hidden="true">
        <div class="pm-modal__card" role="dialog" aria-modal="true" aria-labelledby="pm-login-title">
            <div class="pm-modal__header">
                <h3 id="pm-login-title">Accedi</h3>
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-login-close">Chiudi</button>
            </div>
            <div class="pm-login-choice">
                <button type="button" class="pm-btn" id="pm-login-choice-employee">Dipendente</button>
                <button type="button" class="pm-btn" id="pm-login-choice-admin">Admin</button>
            </div>
            <div class="pm-login-panel" id="pm-login-employee-panel">
                <div class="pm-field">
                    <label for="pm-login-department">Reparto</label>
                    <select id="pm-login-department"></select>
                </div>
                <div class="pm-field">
                    <label for="pm-login-employee-name">Dipendente</label>
                    <select id="pm-login-employee-name"></select>
                </div>
                <button type="button" class="pm-btn pm-btn--primary" id="pm-login-employee-confirm">Entra</button>
            </div>
            <div class="pm-login-panel is-hidden" id="pm-login-admin-panel">
                <div class="pm-field">
                    <label for="pm-login-admin-name">Admin</label>
                    <select id="pm-login-admin-name"></select>
                </div>
                <div class="pm-field">
                    <label for="pm-login-admin-password">Password</label>
                    <input type="password" id="pm-login-admin-password" placeholder="Password">
                </div>
                <div id="pm-login-admin-error" class="pm-message pm-message--error is-hidden">Password errata.</div>
                <button type="button" class="pm-btn pm-btn--primary" id="pm-login-admin-confirm">Entra</button>
            </div>
        </div>
    </div>

    <div class="pm-modal is-hidden" id="pm-logout-modal" aria-hidden="true">
        <div class="pm-modal__card" role="dialog" aria-modal="true" aria-labelledby="pm-logout-title">
            <div class="pm-modal__header">
                <h3 id="pm-logout-title">Logout</h3>
            </div>
            <p>Vuoi uscire dalla sessione corrente?</p>
            <div class="pm-actions">
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-logout-cancel">Annulla</button>
                <button type="button" class="pm-btn pm-btn--primary" id="pm-logout-confirm">Logout</button>
            </div>
        </div>
    </div>

    <div class="pm-modal is-hidden" id="pm-confirm-modal" aria-hidden="true">
        <div class="pm-modal__card pm-confirm-card" role="dialog" aria-modal="true" aria-labelledby="pm-confirm-title">
            <h3 id="pm-confirm-title">Conferma</h3>
            <p id="pm-confirm-message"></p>
            <div class="pm-actions">
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-confirm-cancel">Annulla</button>
                <button type="button" class="pm-btn pm-btn--primary" id="pm-confirm-ok">Ok</button>
            </div>
        </div>
    </div>

    <div class="pm-modal is-hidden" id="pm-export-modal" aria-hidden="true">
        <div class="pm-modal__card pm-export-card" role="dialog" aria-modal="true" aria-labelledby="pm-export-title">
            <div class="pm-modal__header">
                <h3 id="pm-export-title">Export Excel</h3>
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-export-close">Chiudi</button>
            </div>
            <div class="pm-field">
                <label for="pm-export-urgency">Priorità</label>
                <div id="pm-export-urgency"></div>
            </div>
            <div class="pm-field">
                <label for="pm-export-tag">Tag</label>
                <div id="pm-export-tag"></div>
            </div>
            <div class="pm-field pm-checkbox">
                <label>Stato</label>
                <div id="pm-export-state"></div>
            </div>
            <div class="pm-field pm-checkbox">
                <label>Intervallo</label>
                <div class="pm-filter-row">
                    <label><input type="radio" name="pm-export-range" value="all" checked> Sempre</label>
                    <label><input type="radio" name="pm-export-range" value="year"> Anno</label>
                    <label><input type="radio" name="pm-export-range" value="range"> Da/ A</label>
                </div>
            </div>
            <div class="pm-field">
                <label for="pm-export-year">Anno</label>
                <select id="pm-export-year"></select>
            </div>
            <div class="pm-field">
                <label for="pm-export-start">Da</label>
                <input type="date" id="pm-export-start">
            </div>
            <div class="pm-field">
                <label for="pm-export-end">A</label>
                <input type="date" id="pm-export-end">
            </div>
            <div class="pm-actions">
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-export-cancel">Annulla</button>
                <button type="button" class="pm-btn pm-btn--primary" id="pm-export-run">Esporta</button>
            </div>
            <div id="pm-export-message" class="pm-message is-hidden"></div>
        </div>
    </div>

    <div class="pm-modal is-hidden" id="pm-alert-modal" aria-hidden="true">
        <div class="pm-modal__card pm-confirm-card" role="dialog" aria-modal="true" aria-labelledby="pm-alert-title">
            <h3 id="pm-alert-title">Avviso</h3>
            <p id="pm-alert-message"></p>
            <p id="pm-alert-detail" class="pm-alert-detail is-hidden"></p>
            <div class="pm-actions">
                <button type="button" class="pm-btn pm-btn--primary" id="pm-alert-ok">Ok</button>
            </div>
        </div>
    </div>

    <div class="fp-modal is-hidden" id="fp-guide-modal" aria-hidden="true">
        <div class="fp-modal__card fp-modal__card--tech fp-guide-card" role="dialog" aria-modal="true" aria-labelledby="fp-guide-title">
            <div id="fp-guide-message" class="fp-message is-hidden"></div>
            <iframe id="fp-guide-frame" class="fp-guide-frame" title="Guida AyPi" src="about:blank"></iframe>
        </div>
    </div>

    <div class="pm-modal is-hidden" id="pm-suborder-modal" aria-hidden="true">
        <div class="pm-modal__card" role="dialog" aria-modal="true" aria-labelledby="pm-suborder-title">
            <div class="pm-modal__header">
                <h3 id="pm-suborder-title">Aggiungi sub-ordine</h3>
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-suborder-close">Chiudi</button>
            </div>
            <div class="pm-field">
                <label for="pm-suborder-department">Reparto</label>
                <select id="pm-suborder-department"></select>
            </div>
            <div class="pm-field">
                <label for="pm-suborder-employee">Dipendente</label>
                <select id="pm-suborder-employee"></select>
            </div>
            <div class="pm-field">
                <label for="pm-suborder-quantity">Quantita</label>
                <input type="number" id="pm-suborder-quantity" min="0" step="0.01">
            </div>
            <div class="pm-actions">
                <button type="button" class="pm-btn pm-btn--primary" id="pm-suborder-save">Aggiungi</button>
            </div>
            <div id="pm-suborder-message" class="pm-message is-hidden"></div>
        </div>
    </div>

    <div class="pm-modal is-hidden" id="pm-approve-modal" aria-hidden="true">
        <div class="pm-modal__card" role="dialog" aria-modal="true" aria-labelledby="pm-approve-title">
            <div class="pm-modal__header">
                <h3 id="pm-approve-title">Approva prodotto</h3>
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-approve-close">Chiudi</button>
            </div>
            <div class="pm-field">
                <label for="pm-approve-price">Prezzo unitario</label>
                <input type="number" id="pm-approve-price" min="0" step="0.01">
            </div>
            <div class="pm-field pm-checkbox">
                <input type="checkbox" id="pm-approve-save-price">
                <label for="pm-approve-save-price">Memorizza prezzo per acquisti futuri</label>
            </div>
            <div class="pm-actions">
                <button type="button" class="pm-btn pm-btn--primary" id="pm-approve-save">Approva</button>
            </div>
            <div id="pm-approve-message" class="pm-message is-hidden"></div>
        </div>
    </div>

    <div class="pm-modal is-hidden" id="pm-edit-modal" aria-hidden="true">
        <div class="pm-modal__card" role="dialog" aria-modal="true" aria-labelledby="pm-edit-title">
            <div class="pm-modal__header">
                <h3 id="pm-edit-title">Modifica prodotto</h3>
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-edit-close">Chiudi</button>
            </div>
            <div class="pm-field">
                <label for="pm-edit-product">Prodotto</label>
                <input type="text" id="pm-edit-product">
            </div>
            <div class="pm-field">
                <label for="pm-edit-tags">Tipologia (tag)</label>
                <input type="text" id="pm-edit-tags" placeholder="Tag separati da virgola">
            </div>
            <div class="pm-field">
                <label for="pm-edit-quantity">QuantitÃ </label>
                <input type="number" id="pm-edit-quantity" min="0" step="1">
            </div>
            <div class="pm-field">
                <label for="pm-edit-unit">UM</label>
                <input type="text" id="pm-edit-unit">
            </div>
            <div class="pm-field">
                <label for="pm-edit-urgency">Priorità</label>
                <select id="pm-edit-urgency">
                    <option value="">Seleziona Priorità</option>
                    <option value="Alta">Alta</option>
                    <option value="Media">Media</option>
                    <option value="Bassa">Bassa</option>
                </select>
            </div>
            <div class="pm-field">
                <label for="pm-edit-url">URL</label>
                <input type="text" id="pm-edit-url">
            </div>
            <div class="pm-field">
                <label for="pm-edit-price">Prezzo C.A.D</label>
                <input type="number" id="pm-edit-price" min="0" step="0.01">
            </div>
            <div class="pm-field">
                <label for="pm-edit-note">Note</label>
                <input type="text" id="pm-edit-note">
            </div>
            <div class="pm-actions">
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-edit-cancel">Annulla</button>
                <button type="button" class="pm-btn pm-btn--primary" id="pm-edit-save">Salva</button>
            </div>
        </div>
    </div>

    <div class="pm-modal is-hidden" id="pm-add-modal" aria-hidden="true">
        <div class="pm-modal__card" role="dialog" aria-modal="true" aria-labelledby="pm-add-title">
            <div class="pm-modal__header">
                <h3 id="pm-add-title">Aggiungi quantitÃ </h3>
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-add-close">Chiudi</button>
            </div>
            <div class="pm-field">
                <label for="pm-add-quantity">QuantitÃ </label>
                <input type="number" id="pm-add-quantity" min="0" step="1" placeholder="0">
            </div>
            <div class="pm-actions">
                <button type="button" class="pm-btn pm-btn--ghost" id="pm-add-cancel">Annulla</button>
                <button type="button" class="pm-btn pm-btn--primary" id="pm-add-save">Conferma</button>
            </div>
        </div>
    </div>

    <script>
        (function () {
            try {
                var path = require("path");
                var scriptPath = path.join(__dirname, "..", "..", "scripts", "utilities", "product-manager-scripts.js");
                require(scriptPath);
                var warn = document.getElementById("pm-js-warning");
                if (warn) warn.classList.add("is-hidden");
            } catch (err) {
                try {
                    var ipcRenderer = require("electron").ipcRenderer;
                    if (ipcRenderer) {
                        ipcRenderer.invoke("show-message-box", {
                            type: "error",
                            message: "Errore Product Manager",
                            detail: err && err.message ? err.message : String(err),
                        });
                    }
                } catch (innerErr) {}
            }
        })();
    </script>
</body>

</html>






